import{v as z,x as P,r as g,q as h,s as S,d as e,u,t as o,B as i,aa as n,Q as f,A as C,z as $,ab as A}from"./index.16fafb50.js";import{a as x,Q as B}from"./QCard.9550f461.js";import{Q as L}from"./QPage.bd9db12d.js";import{_ as D}from"./BreadcrumbNav.24a9f6cf.js";import{g as G}from"./getUser.66bacbda.js";import{Q as U,a as N,b as s,c as I,d as F}from"./QTooltip.c51851d1.js";import{Q as j}from"./QBtnGroup.8a143a29.js";import{_ as R}from"./DialogEliminar.48da2dec.js";import{u as M}from"./useObtenerEmpresas.ce7d49b0.js";import{u as O,a as H}from"./useForzarEliminaci\xF3nRecurso.225e6ff9.js";import{u as J}from"./useRecursosEliminados.dcfd38af.js";import{u as K}from"./useRestaurarRecurso.c88508a3.js";import"./use-dark.fd3c0586.js";import"./QSeparator.c2a03803.js";import"./QList.747496ef.js";import"./QMarkupTable.c292dae4.js";import"./QSelect.3768a279.js";import"./use-key-composition.749118dd.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QChip.fc1367d4.js";import"./QItem.98cb2d4c.js";import"./QItemLabel.bb4f8a3f.js";import"./QMenu.ab6378a2.js";import"./selection.fb3d903a.js";import"./focusout.5c99f0fb.js";import"./QDialog.82b87909.js";import"./use-prevent-scroll.175dc396.js";import"./use-form.e491c393.js";import"./format.2bc25e5f.js";import"./use-checkbox.abf6af25.js";import"./use-fullscreen.eb530c2b.js";import"./QCardActions.4c1c4976.js";import"./ClosePopup.159f4ab9.js";import"./useRecursosMultiples.fa0015da.js";import"./documentosApi.d4af84c5.js";import"./axios.a596eead.js";import"./useQuery.esm.48506497.js";import"./useQueryClient.esm.ad4fb503.js";import"./utils.esm.429db25b.js";import"./useMutation.esm.3aac1ad5.js";import"./mutation.esm.54ea4acf.js";const W=()=>O("/empresas","Se elimin\xF3 la empresa"),q=[{field:"nombre",name:"nombre",label:"Nombre de la empresa",align:"left",sortable:!0},{field:"giro",name:"giro",label:"Giro",align:"left",sortable:!0},{field:"telefono",name:"telefono",label:"Tel\xE9fono",align:"left",sortable:!0},{field:"domicilio",name:"domicilio",label:"Domicilio",align:"left",sortable:!0},{field:"titular",name:"titular",label:"Titular",align:"left",sortable:!0},{field:"accion",name:"accion",label:"Acci\xF3n",align:"right"}],X=z({__name:"TablaEmpresa",setup(T){const l=P(),m=g(!1),d=g(""),{data:_,isLoading:v}=M(),{eliminarRecurso:b}=W(),E=c=>{l.push({name:"ver-empresa",params:{id:c}})},k=c=>{l.push({name:"editar-empresa",params:{id:c}})},V=c=>{m.value=!0,d.value=c};return(c,y)=>(h(),S("div",null,[e(R,{modelValue:m.value,"onUpdate:modelValue":y[0]||(y[0]=r=>m.value=r),"recurso-id":d.value,onEliminar:u(b)},null,8,["modelValue","recurso-id","onEliminar"]),e(U,{flat:"",bordered:"",rows:u(_),columns:u(q),"row-key":"nombre",loading:u(v),pagination:{rowsPerPage:15}},{body:o(r=>[e(N,{props:r},{default:o(()=>[e(s,{key:"nombre",props:r},{default:o(()=>[i(n(r.row.nombre),1)]),_:2},1032,["props"]),e(s,{key:"giro",props:r},{default:o(()=>[i(n(r.row.giro),1)]),_:2},1032,["props"]),e(s,{key:"telefono",props:r},{default:o(()=>[i(n(r.row.telefono),1)]),_:2},1032,["props"]),e(s,{key:"domicilio",props:r},{default:o(()=>[i(n(r.row.domicilio),1)]),_:2},1032,["props"]),e(s,{key:"titular",props:r},{default:o(()=>[i(n(r.row.titular),1)]),_:2},1032,["props"]),e(s,{key:"accion",props:r},{default:o(()=>[e(j,{push:""},{default:o(()=>[e(f,{size:"sm",color:"info",push:"",glossy:"",icon:"visibility",onClick:w=>E(r.row.id)},null,8,["onClick"]),e(f,{size:"sm",color:"secondary",push:"",glossy:"",icon:"edit",onClick:w=>k(r.row.id)},null,8,["onClick"]),e(f,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete",onClick:w=>V(r.row.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])]))}}),Y=()=>J("empresas-trashed",["empresas-trashed"],{},{staleTime:1e3*60*60}),Z=()=>H("empresas-force-delete","empresas-trashed"),ee=()=>K("/empresas-restore","empresas","empresas-trashed"),oe={class:"flex justify-end q-gutter-md q-mb-md"},ae=z({__name:"TablaEmpresaEliminado",setup(T){const l=g([]),m=g(!1),d=g(!1),_=g(""),{data:v,isLoading:b}=Y(),{eliminarRecurso:E}=Z(),{restaurarRecurso:k}=ee(),V=p=>{E(p)},c=()=>{m.value=!0},y=p=>{d.value=!0,_.value=p},r=()=>{const p=l.value.map(t=>t.id.toString());k(p),l.value=[]},w=()=>{const p=l.value.map(t=>t.id.toString());E(p),l.value=[]};return(p,t)=>(h(),S("div",null,[e(R,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value=a),"recurso-id":_.value,icon:"delete_forever",onEliminar:V,mensaje:"\xBFEstas seguro de eliminar esta empresa? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Piensalo!"},null,8,["modelValue","recurso-id"]),e(R,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a),"recurso-id":l.value,icon:"delete_forever",onEliminar:w,mensaje:"\xBFEstas seguro de eliminar estas empresas? Si se llega a eliminar, todos los datos se perder\xE1n para simpre y por simpre. \xA1Pi\xE9nsalo!"},null,8,["modelValue","recurso-id"]),C("div",oe,[e(f,{disable:!l.value.length,color:"secondary",icon:"restore",onClick:r},null,8,["disable"]),e(f,{disable:!l.value.length,color:"negative",icon:"delete_forever",onClick:c},null,8,["disable"])]),e(U,{flat:"",bordered:"",rows:u(v),columns:u(q),"row-key":"id",loading:u(b),pagination:{rowsPerPage:15},selection:"multiple",selected:l.value,"onUpdate:selected":t[2]||(t[2]=a=>l.value=a)},{body:o(a=>[e(N,{props:a},{default:o(()=>[e(s,null,{default:o(()=>[e(I,{modelValue:a.selected,"onUpdate:modelValue":Q=>a.selected=Q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(s,{key:"nombre",props:a},{default:o(()=>[i(n(a.row.nombre),1)]),_:2},1032,["props"]),e(s,{key:"giro",props:a},{default:o(()=>[i(n(a.row.giro),1)]),_:2},1032,["props"]),e(s,{key:"telefono",props:a},{default:o(()=>[i(n(a.row.telefono),1)]),_:2},1032,["props"]),e(s,{key:"domicilio",props:a},{default:o(()=>[i(n(a.row.domicilio),1)]),_:2},1032,["props"]),e(s,{key:"titular",props:a},{default:o(()=>[i(n(a.row.titular),1)]),_:2},1032,["props"]),e(s,{key:"accion",props:a},{default:o(()=>[e(j,{push:""},{default:o(()=>[e(f,{size:"sm",color:"secondary",push:"",glossy:"",icon:"restore",onClick:Q=>u(k)(a.row.id)},{default:o(()=>[e(F,null,{default:o(()=>[i(" Restaurar empresa ")]),_:1})]),_:2},1032,["onClick"]),e(f,{size:"sm",color:"negative",push:"",glossy:"",icon:"delete_forever",onClick:Q=>y(a.row.id)},{default:o(()=>[e(F,null,{default:o(()=>[i(" Forzar eliminaci\xF3n ")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading","selected"])]))}}),re={class:"flex justify-between items-center"},le=C("div",{class:"fontsize-15 text-weight-light"},"Empresas",-1),se=C("div",{class:"fontsize-15 text-weight-light"},"Empresas eliminadas",-1),Je=z({__name:"ListarEmpresa",setup(T){const l=P(),m=()=>{l.push({name:"crear-empresa"})},d=G(),_=[{label:"Empresas",icon:"domain"}];return(v,b)=>(h(),$(L,{padding:""},{default:o(()=>[e(D,{pages:_,titlePage:"Lista de empresas"}),e(B,null,{default:o(()=>[e(x,null,{default:o(()=>[C("div",re,[le,e(f,{label:"Nuevo",icon:"add_circle_outline",color:"secondary",size:"md",padding:"xs",onClick:m})])]),_:1}),e(x,null,{default:o(()=>[e(X)]),_:1})]),_:1}),u(d)==="admin"?(h(),$(B,{key:0,class:"q-mt-md"},{default:o(()=>[e(x,null,{default:o(()=>[se]),_:1}),e(x,null,{default:o(()=>[e(ae)]),_:1})]),_:1})):A("",!0)]),_:1}))}});export{Je as default};
