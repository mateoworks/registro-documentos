import{Q as L,a as Q}from"./QCard.9550f461.js";import{Q as R}from"./QBanner.f76ac382.js";import{Q as n}from"./QInput.ec90feeb.js";import{Q as M}from"./QSelect.3768a279.js";import{v as j,aM as b,r as w,c as O,q as c,z as V,t as s,d as t,A as o,B as d,aa as p,u as v,s as U,ar as z,F as T,ab as C,Q as G,ao as F,ac as f}from"./index.16fafb50.js";import{Q as P}from"./QFile.0d542f19.js";import{Q as H}from"./QImg.f997db3b.js";import{Q as J}from"./QForm.5f43623c.js";import{g as K}from"./errorUtils.9be85d5d.js";import{u as W}from"./useObtenerCarreras.a799378f.js";const X=o("div",{class:"fontsize-15 text-weight-light"},"Introduce los datos",-1),Y={class:"row"},Z={class:"col-xs-12 col-sm-8"},$={class:"row q-col-gutter-md"},ee={class:"col-12"},le={class:"col-xs-12 col-sm-6"},oe=o("span",{class:"required-star"},"*",-1),ae={class:"col-xs-12 col-sm-6"},se=o("span",{class:"required-star"},"*",-1),te={class:"col-xs-12 col-sm-6"},re=o("span",{class:"required-star"},"*",-1),de={class:"col-xs-12 col-sm-6"},ne=o("span",{class:"required-star"},"*",-1),ie={class:"col-xs-12 col-sm-6"},ue={class:"col-xs-12 col-sm-6"},me=o("span",{class:"required-star"},"*",-1),ce={class:"col-xs-12 col-sm-6"},pe={class:"col-xs-12 col-sm-6"},ve={class:"col-xs-12 col-sm-6"},_e={class:"col-xs-12 col-sm-6"},ge={class:"col-xs-12 col-sm-7"},be={class:"col-xs-12 col-sm-4 q-pl-md"},Ve=o("div",{class:"text-subtitle1"},"Datos de usuario del estudiante:",-1),fe=o("div",{class:"text-weight-medium"},"Nombre:",-1),xe={class:"text-weight-light text-subtitle1"},he=o("div",{class:"text-weight-medium"},"Correo:",-1),Qe={class:"text-weight-light text-subtitle1"},Be=j({__name:"FormEstudiante",props:{estudiante:{},loading:{type:Boolean},errorServer:{}},emits:["guardar"],setup(q,{emit:E}){var x;const _=q,{data:S}=W(),l=b(_,"estudiante"),y=b(_,"loading"),g=b(_,"errorServer"),k=g.value,i=w(null);let u=w(((x=l.value.user)==null?void 0:x.url_foto)||null);const I=()=>{const r=new FormData;r.append("id",l.value.id),r.append("nombre",l.value.nombre),r.append("apellidos",l.value.apellidos),r.append("numero_control",l.value.numero_control),r.append("telefono",l.value.telefono+""),r.append("email",l.value.email),r.append("carrera_id",l.value.carrera_id+""),r.append("seguridad_social",l.value.seguridad_social+""),r.append("no_seguridad_social",l.value.no_seguridad_social+""),r.append("domicilio",l.value.domicilio+""),r.append("password",l.value.password+""),i.value!=null&&r.append("url_foto",i.value[0]),E("guardar",r)},B=O(()=>K(g.value)),D=()=>{i.value&&(u.value=URL.createObjectURL(i.value[0]))},N=()=>{u.value="",i.value=null},A=r=>{var m,h;const a=r.target,e=((m=a.files)==null?void 0:m[0])||null;i.value=((h=a.files)==null?void 0:h[0])||null,e&&(u.value=URL.createObjectURL(e))};return(r,a)=>(c(),V(L,null,{default:s(()=>[t(Q,null,{default:s(()=>[X]),_:1}),t(J,{onSubmit:f(I,["prevent"])},{default:s(()=>[t(Q,null,{default:s(()=>[o("div",Y,[o("div",Z,[o("div",$,[o("div",ee,[g.value?(c(),V(R,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:s(()=>{var e;return[d(p(((e=v(k))==null?void 0:e.message)||"")+" ",1),o("ul",null,[(c(!0),U(T,null,z(B.value,m=>(c(),U("li",{key:m},p(m),1))),128))])]}),_:1})):C("",!0)]),o("div",le,[t(n,{modelValue:l.value.nombre,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.nombre=e),"label-slot":"",rules:[e=>!!e||"El nombre del estudiante es requerido",e=>e.length>3&&e.length<255||"Debe tener m\xE1s de 3 caracteres y menos de 255"]},{label:s(()=>[d(" Nombre(s): "),oe]),_:1},8,["modelValue","rules"])]),o("div",ae,[t(n,{modelValue:l.value.apellidos,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.apellidos=e),"label-slot":"",rules:[e=>!!e||"El nombre del estudiante es requerido",e=>e.length>3&&e.length<255||"Debe tener m\xE1s de 3 caracteres y menos de 255"]},{label:s(()=>[d(" Apellidos: "),se]),_:1},8,["modelValue","rules"])]),o("div",te,[t(n,{modelValue:l.value.numero_control,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.numero_control=e),"label-slot":"",rules:[e=>!!e||"El n\xFAmero de control es requerido",e=>e.length>3&&e.length<255||"Debe tener m\xE1s de 3 caracteres y menos de 255"]},{label:s(()=>[d(" N\xFAmero de control: "),re]),_:1},8,["modelValue","rules"])]),o("div",de,[t(M,{modelValue:l.value.carrera_id,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.carrera_id=e),options:v(S),"label-slot":"","option-value":"id","option-label":"nombre","emit-value":"","map-options":"",rules:[e=>!!e||"Selecciona una carrera"]},{label:s(()=>[d(" Carrera "),ne]),_:1},8,["modelValue","options","rules"])]),o("div",ie,[t(n,{modelValue:l.value.telefono,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.telefono=e),"label-slot":"",mask:"(###) ### - ####"},{label:s(()=>[d(" Tel\xE9fono: ")]),_:1},8,["modelValue"])]),o("div",ue,[t(n,{modelValue:l.value.email,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.email=e),"label-slot":"",rules:[e=>!!e||"El correo es requerido",e=>e.length>3&&e.length<255||"Debe tener m\xE1s de 3 caracteres y menos de 255"]},{label:s(()=>[d(" Correo electr\xF3nico: "),me]),_:1},8,["modelValue","rules"])]),o("div",ce,[t(n,{modelValue:l.value.seguridad_social,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.seguridad_social=e),"label-slot":""},{label:s(()=>[d(" Seguridad social: ")]),_:1},8,["modelValue"])]),o("div",pe,[t(n,{modelValue:l.value.no_seguridad_social,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value.no_seguridad_social=e),"label-slot":""},{label:s(()=>[d(" N\xFAmero de seguridad social: ")]),_:1},8,["modelValue"])]),o("div",ve,[t(n,{modelValue:l.value.domicilio,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.domicilio=e),"label-slot":""},{label:s(()=>[d(" Domicilio: ")]),_:1},8,["modelValue"])]),o("div",_e,[t(n,{modelValue:l.value.ciudad,"onUpdate:modelValue":a[9]||(a[9]=e=>l.value.ciudad=e),"label-slot":""},{label:s(()=>[d(" Ciudad: ")]),_:1},8,["modelValue"])]),o("div",ge,[t(G,{label:"Guardar",color:"primary",type:"submit",loading:y.value},null,8,["loading"])])])]),o("div",be,[Ve,fe,o("div",xe,p(l.value.nombre)+" "+p(l.value.apellidos),1),he,o("div",Qe,p(l.value.email),1),o("div",null,[t(n,{modelValue:l.value.password,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.password=e),hint:"Si no coloca la contrase\xF1a, esta sera password","label-slot":""},{label:s(()=>[d(" Contrase\xF1a: ")]),_:1},8,["modelValue"])]),o("div",null,[t(P,{"bottom-slots":"",modelValue:i.value,"onUpdate:modelValue":[a[12]||(a[12]=e=>i.value=e),D],"label-slot":"",counter:"",multiple:"",accept:".jpg, image/*",onChange:A},{label:s(()=>[d(" Imagen de perfil: ")]),prepend:s(()=>[t(F,{name:"cloud_upload",onClick:a[11]||(a[11]=f(()=>{},["stop","prevent"]))})]),append:s(()=>[t(F,{name:"close",onClick:f(N,["stop","prevent"]),class:"cursor-pointer"},null,8,["onClick"])]),_:1},8,["modelValue"]),o("div",null,[v(u)?(c(),V(H,{key:0,src:v(u),alt:"Perfil"},null,8,["src"])):C("",!0)])])])])]),_:1})]),_:1},8,["onSubmit"])]),_:1}))}});export{Be as _};
