import{Q as M}from"./QBanner.f76ac382.js";import{Q as V}from"./QSelect.3768a279.js";import{v as U,aM as f,r as y,c as A,q as v,z as x,t as a,d as t,ac as g,A as s,B as c,aa as D,u as p,s as S,ar as N,F as Y,ab as I,ao as b,as as P,Q as w}from"./index.16fafb50.js";import{Q as $}from"./QDate.75e05ac0.js";import{Q as j}from"./QPopupProxy.2db034ac.js";import{Q as z}from"./QInput.ec90feeb.js";import{Q as K}from"./QFile.0d542f19.js";import{Q as O}from"./QForm.5f43623c.js";import{Q as R,a as T}from"./QCard.9550f461.js";import{C as G}from"./ClosePopup.159f4ab9.js";import{g as H}from"./errorUtils.9be85d5d.js";import{d as J}from"./date.eb8942c3.js";import{u as W}from"./useObtenerDocumentos.0e046498.js";import{d as X}from"./documentosApi.d4af84c5.js";import{u as Z}from"./useQuery.esm.48506497.js";const ee=async r=>{const{data:d}=await X.get(`/estudiante-autompletar?busqueda=${r}`);return d},oe=r=>{const{isLoading:d,isError:u,data:l}=Z({queryKey:["estudiante-autompletar"],queryFn:()=>ee(r)});return{isLoading:d,isError:u,data:l}},ae={class:"row q-col-gutter-md"},te={class:"col-12"},se={class:"col-xs-12 col-sm-8"},le=s("span",{class:"required-star"},"*",-1),ne={class:"col-xs-12 col-sm-8"},re=s("span",{class:"required-star"},"*",-1),de={class:"col-xs-12 col-sm-8"},ue=s("span",{class:"required-star"},"*",-1),ie={class:"row items-center justify-end"},me={class:"col-xs-12 col-sm-8"},ce={class:"col-xs-12 col-sm-7"},Ee=U({__name:"FormEntrega",props:{entrega:{},loading:{type:Boolean},errorServer:{}},emits:["guardar"],setup(r,{emit:d}){const u=r,l=f(u,"entrega"),C=f(u,"loading"),_=f(u,"errorServer"),q=_.value,i=y(null),{data:E,isLoading:F}=W(),{data:h,isLoading:k}=oe(""),m=y(J.formatDate(new Date,"YYYY/MM/DD")),B=()=>{const n=new FormData;n.append("id",l.value.id),n.append("estudiante_id",l.value.estudiante_id+""),n.append("documento_id",l.value.documento_id+""),n.append("fecha_entrega",m.value+""),i.value&&n.append("url_documento",i.value[0]),d("guardar",n)},L=A(()=>H(_.value));return(n,o)=>(v(),x(R,null,{default:a(()=>[t(T,null,{default:a(()=>[t(O,{onSubmit:g(B,["prevent"])},{default:a(()=>[s("div",ae,[s("div",te,[_.value?(v(),x(M,{key:0,"inline-actions":"",class:"text-white bg-red"},{default:a(()=>{var e;return[c(D(((e=p(q))==null?void 0:e.message)||"")+" ",1),s("ul",null,[(v(!0),S(Y,null,N(L.value,Q=>(v(),S("li",{key:Q},D(Q),1))),128))])]}),_:1})):I("",!0)]),s("div",se,[t(V,{modelValue:l.value.estudiante_id,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.estudiante_id=e),options:p(h),"option-value":"estudiante_id","option-label":"nombre_completo","input-debounce":"0","emit-value":"","map-options":"",loading:p(k),"label-slot":"",rules:[e=>!!e||"Selecciona un estudiante"]},{label:a(()=>[c(" Estudiante "),le]),_:1},8,["modelValue","options","loading","rules"])]),s("div",ne,[t(V,{modelValue:l.value.documento_id,"onUpdate:modelValue":o[1]||(o[1]=e=>l.value.documento_id=e),options:p(E),"option-value":"id","option-label":"nombre_documento","emit-value":"","map-options":"","label-slot":"",rules:[e=>!!e||"Selecciona un documento"],loading:p(F)},{label:a(()=>[c(" Documento: "),re]),_:1},8,["modelValue","options","rules","loading"])]),s("div",de,[t(z,{modelValue:m.value,"onUpdate:modelValue":o[3]||(o[3]=e=>m.value=e),mask:"date",rules:[e=>!!e||"La fecha es requerida"],"label-slot":""},{label:a(()=>[c(" Fecha de entrega "),ue]),append:a(()=>[t(b,{name:"event",class:"cursor-pointer"},{default:a(()=>[t(j,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[t($,{modelValue:m.value,"onUpdate:modelValue":o[2]||(o[2]=e=>m.value=e)},{default:a(()=>[s("div",ie,[P(t(w,{label:"Close",color:"primary",flat:""},null,512),[[G]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])]),s("div",me,[t(K,{"bottom-slots":"",modelValue:i.value,"onUpdate:modelValue":o[6]||(o[6]=e=>i.value=e),"label-slot":"",counter:"",multiple:"",accept:".doc, .docx, .pdf"},{label:a(()=>[c(" Formato llenado: ")]),prepend:a(()=>[t(b,{name:"cloud_upload",onClick:o[4]||(o[4]=g(()=>{},["stop","prevent"]))})]),append:a(()=>[t(b,{name:"close",onClick:o[5]||(o[5]=g(e=>i.value=null,["stop","prevent"])),class:"cursor-pointer"})]),_:1},8,["modelValue"])]),s("div",ce,[t(w,{label:"Agregar documento",color:"primary",type:"submit",loading:C.value},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}))}});export{Ee as _};
