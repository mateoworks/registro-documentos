import{a as v,Q as x}from"./QCard.9550f461.js";import{Q as g}from"./QSelect.3768a279.js";import{Q as V}from"./QInput.ec90feeb.js";import{x as q,v as S,r as L,q as w,z as A,t as a,d as t,A as o,B as c,ac as C,u as n,Q as E}from"./index.16fafb50.js";import{Q as B}from"./QForm.5f43623c.js";import{Q as P}from"./QPage.bd9db12d.js";import{_ as R}from"./BreadcrumbNav.24a9f6cf.js";import{u as k}from"./useObtenerPeriodos.fd2c7100.js";import{u as K}from"./useObtenerEmpresas.ce7d49b0.js";import{d as f}from"./documentosApi.d4af84c5.js";import{u as N}from"./useQuery.esm.48506497.js";import{u as U}from"./useQueryClient.esm.ad4fb503.js";import{u as D}from"./useMutation.esm.3aac1ad5.js";import"./use-dark.fd3c0586.js";import"./use-key-composition.749118dd.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QChip.fc1367d4.js";import"./QItem.98cb2d4c.js";import"./QItemLabel.bb4f8a3f.js";import"./QMenu.ab6378a2.js";import"./selection.fb3d903a.js";import"./focusout.5c99f0fb.js";import"./QDialog.82b87909.js";import"./use-prevent-scroll.175dc396.js";import"./use-form.e491c393.js";import"./format.2bc25e5f.js";import"./useRecursosMultiples.fa0015da.js";import"./axios.a596eead.js";import"./utils.esm.429db25b.js";import"./mutation.esm.54ea4acf.js";const M=async()=>{const{data:l}=await f.get("/estudiantes-sin-residencia");return l},O=()=>{const{isLoading:l,data:s}=N(["estudiantes-sin-residencia"],M,{keepPreviousData:!0,staleTime:36e5});return{isLoading:l,data:s}},T=l=>{const s=async d=>{try{const{data:u}=await f.patch("/asignar-residencia/"+d.estudiante_id,d,{params:{id:d.estudiante_id}});return u}catch(u){throw u}},m=q(),r=U(),{mutate:p,isLoading:_}=D(s,{onSuccess:()=>{r.invalidateQueries({queryKey:["estudiantes"],exact:!1}),r.invalidateQueries({queryKey:["estudiantes"],exact:!1}),r.invalidateQueries({queryKey:["estudiantes-sin-residencia"],exact:!1}),r.invalidateQueries({queryKey:["residentes"],exact:!1}),m.push({name:"listar-residente"})}});return{mutate:p,isLoading:_}},z={class:"row"},F={class:"col"},I={class:"row"},$={class:"col-xs-12 col-sm-8"},j={class:"row q-col-gutter-md"},G={class:"col-xs-12 col-sm-10"},H=o("span",{class:"required-star"},"*",-1),J={class:"col-xs-12 col-sm-10"},W=o("span",{class:"required-star"},"*",-1),X={class:"col-xs-12 col-sm-10"},Y=o("span",{class:"required-star"},"*",-1),Z={class:"col-xs-12 col-sm-10"},ee=o("span",{class:"required-star"},"*",-1),se={class:"col-xs-12 col-sm-7"},ke=S({__name:"CrearResidente",setup(l){const s=L({estudiante_id:"",proyecto:"",empresa_id:"",periodo_id:""}),{data:m,isLoading:r}=k(),{data:p,isLoading:_}=K(),{data:d,isLoading:u}=O(),{mutate:b,isLoading:y}=T(s.value.estudiante_id),Q=()=>{b(s.value)},h=[{label:"Residentes",icon:"history_edu",to:"listar-residente"},{label:"Asignar residencia",icon:"add_circle_outline"}];return(oe,i)=>(w(),A(P,{padding:""},{default:a(()=>[t(R,{pages:h,titlePage:"Asignar residencia a un estudiante"}),o("div",z,[o("div",F,[t(x,null,{default:a(()=>[t(v,null,{default:a(()=>[c(" Asignar residencia ")]),_:1}),t(B,{onSubmit:C(Q,["prevent"])},{default:a(()=>[t(v,null,{default:a(()=>[o("div",I,[o("div",$,[o("div",j,[o("div",G,[t(g,{modelValue:s.value.estudiante_id,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value.estudiante_id=e),options:n(d),"label-slot":"","option-value":"id","option-label":"nombre",loading:n(u),"emit-value":"","map-options":"",rules:[e=>!!e||"Selecciona un estudiante"]},{label:a(()=>[c(" Selecciona un estudiante "),H]),_:1},8,["modelValue","options","loading","rules"])]),o("div",J,[t(V,{modelValue:s.value.proyecto,"onUpdate:modelValue":i[1]||(i[1]=e=>s.value.proyecto=e),"label-slot":"",rules:[e=>!!e||"El proyecto es requerido",e=>e.length>3&&e.length<255||"Debe tener m\xE1s de 3 caracteres y menos de 255"]},{label:a(()=>[c(" Nombre del proyecto: "),W]),_:1},8,["modelValue","rules"])]),o("div",X,[t(g,{modelValue:s.value.periodo_id,"onUpdate:modelValue":i[2]||(i[2]=e=>s.value.periodo_id=e),options:n(m),"label-slot":"","option-value":"id","option-label":"nombre",loading:n(r),"emit-value":"","map-options":"",rules:[e=>!!e||"Selecciona un periodo"]},{label:a(()=>[c(" Selecciona un periodo "),Y]),_:1},8,["modelValue","options","loading","rules"])]),o("div",Z,[t(g,{modelValue:s.value.empresa_id,"onUpdate:modelValue":i[3]||(i[3]=e=>s.value.empresa_id=e),options:n(p),"label-slot":"","option-value":"id","option-label":"nombre",loading:n(_),"emit-value":"","map-options":"",rules:[e=>!!e||"Selecciona una empresa"]},{label:a(()=>[c(" Selecciona una empresa "),ee]),_:1},8,["modelValue","options","loading","rules"])]),o("div",se,[t(E,{label:"Asignar residencia",color:"primary",type:"submit",loading:n(y)},null,8,["loading"])])])])])]),_:1})]),_:1},8,["onSubmit"])]),_:1})])])]),_:1}))}});export{ke as default};
